<template name='detailItem'>
  <view>
    <text class='cal-detail-col cal-detail-col-0'>{{index + 1}}月</text>
    <text class='cal-detail-col cal-detail-col-1'>{{taxPaid}}</text>
    <text class='cal-detail-col cal-detail-col-2'>{{moneyGet}}</text>
  </view>
</template>
<view class='cal-container'>
  <form bindsubmit='quickFormSubmit' bindreset='quickFormReset'>
    <view class='cal-quick-form'>
      <view>
        <text>税前工资</text>
        <input name='salary' type='digit' placeholder='输入每月应发工资' />
      </view>
      <view>
        <text>专项扣除</text>
        <input name='specialDeduction' type='digit' placeholder='输入每月专项扣除' />
      </view>
      <view>
        <text>三险一金个人扣除</text>
        <input name='insuranceDeduction' type='digit' placeholder='三险一金个人扣除(每月)' />
      </view>
      <view>
        <text>年终奖</text>
        <input name='bonus' type='digit' placeholder='年终奖' />
      </view>
      <view>
        <text>年终奖发放月份</text>
        <picker name='bonusMonth' bindchange='bindBonusMonthChange' value='{{bonusMonth}}' range='{{months}}'>
          <view>{{months[bonusMonth]}}</view>
        </picker>
      </view>
    </view>
    <view class='cal-quick-form-buttons'>
      <button form-type='submit' type='primary'>计算一下</button>
      <button form-type='reset'>重置</button>
    </view>
  </form>
  <view wx:if='{{detail && detail.length > 0}}' class='cal-detail'>
    <view class='cal-detail-table'>
      <view class='cal-detail-header'>
        <text class='cal-detail-col cal-detail-col-0' />
        <text class='cal-detail-col cal-detail-col-1'>个人所得税</text>
        <text class='cal-detail-col cal-detail-col-2'>税后到手</text>
      </view>
      <block wx:for='{{detail}}' wx:key='{{index}}'>
        <template is='detailItem' data='{{...item}}' />
      </block>
      <view class='cal-detail-total'>
        <text class='cal-detail-col cal-detail-col-0'>全年</text>
        <text class='cal-detail-col cal-detail-col-1'>{{taxTotal}}</text>
        <text class='cal-detail-col cal-detail-col-2'>{{moneyGetTotal}}</text>
      </view>
    </view>
  </view>
</view>